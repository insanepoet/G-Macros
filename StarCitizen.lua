---------------------------------------------------------------------------------------------
-- StarCitizen.lua
---------------------------------------------------------------------------------------------
-- Version: 0.2
-- Author: Rory Fincham
-- Based on work by: Egor Skriptunoff
-- Feature Addition Origin can be found: https://gist.github.com/Egor-Skriptunoff/be9a7e4546b47b74a9aae604f5a8c272
--
-- ------------------------------------------------------------------------------------------
--  FEATURE #1 - Inventory Mover - Mouse Button 4 (Back)
-- ------------------------------------------------------------------------------------------
--    Moves items to the opposite side of the screen when button is toggled (press to start, press to stop)
--
--  How to Use: 
--    Place your mouse on the top left most item you wish to move from left to right or right to left and press
--    the Mouse 4 Button (Back). The script will automatically continue moving items untill Mouse 4 is pressed again.
--    Suggest the side receiving items is set to vehicle filter, and that the filters are either visible or hidden on both windows
-- ------------------------------------------------------------------------------------------
-- ------------------------------------------------------------------------------------------
--  FEATURE #2 - Sell at Terminal - Mouse Button 5 (Forward)
-- ------------------------------------------------------------------------------------------
--    Sells ALL items visible on a terminal one at a time using the quick sell Feature
-- 
--  How to Use:
--    Open a shop terminal and select the sell tab at the top, ensuring your source is set you should see items
--    listed below with quick sell buttons visible on each item. Press and hold Mouse Button 5 (forward) then click (lmb) a
--    quick sell button on the terminal. While continuing to hold Mouse Button 5 wait for the sale to process then click 
--    the done button to complete the sale. After the second button is clicked you may release Mouse Button 5 and the macro
--    will begin repeating the process of quickselling and completing the sale using the quicksell button location you have pressed
--    the macro is unable to scroll so if you have more than 6 items showing on the sell screen that you do not want to sell 
--    you will need to move them to another inventory before using this macro
-- ------------------------------------------------------------------------------------------
-- ------------------------------------------------------------------------------------------
--   USER VARIABLES
-- ------------------------------------------------------------------------------------------
--    Because everyone's latency and server speed differs the amount of time it takes your sale to process will differ.
--    This should be set in seconds, I have found 8 seconds to be a little long and 5 seconds to be a little short on occasion 
--    so I have defaulted this setting to 6 seconds, your results may vary however depending on your angle when looking at the terminal 
--    it is entirely possible to accidentally break the macro if the item sold screen takes longer that the time in this variable.
--    If it breaks you can simply restart the macro however if you find it consistently breaking you can increase the time it waits by 
--    increasing the number of seconds below.
-- ------------------------------------------------------------------------------------------
local a = 6 -- # of seconds to wait for transaction to complete
-- ------------------------------------------------------------------------------------------
--     DO NOT EDIT ANYTHING BELOW THIS LINE - THERE BE DRAGONS AHEAD
-- ------------------------------------------------------------------------------------------
local b,type,c,d,e,f,g,h,i,j,k,l,m,select,tostring=print,type,math.floor,math.min,math.max,math.sqrt,string.format,string.byte,string.char,string.rep,string.sub,string.gsub,table.concat,select,tostring;local MoveMouseRelative,MoveMouseTo,GetMousePosition,n,GetRunningTime,OutputLogMessage=MoveMouseRelative,MoveMouseTo,GetMousePosition,Sleep,GetRunningTime,OutputLogMessage;local function print(...)b(...)local o={...}for p=1,select("#",...)do o[p]=tostring(o[p])end;OutputLogMessage("%s\n",m(o,"\t"))end;local q;do local r,s,t,u={{},{}},{},{},true;function q()s[1],s[2]=GetMousePosition()if u then local v;local w=5;for x=1,w+1 do for y=1,2 do local z;local A=r[y][4]if A then local B=s[y]local C=c((B+0.5+2^-16)*(A-1)/65535)if 65535*C>=(B-(0.5+2^-16))*(A-1)then z=C end end;t[y]=z end;if t[1]and t[2]then return t[1],t[2],r[1][4],r[2][4],s[1],s[2]elseif x<=w then print("Attempt #"..x)if v then MoveMouseTo(3*2^14-s[1]/2,3*2^14-s[2]/2)n(10)s[1],s[2]=GetMousePosition()end;v=true;for D,E in ipairs(r)do E[1]={[0]=true}E[2]=0;E[3]=45*225;E[4]=nil;E[5]=6;for p=6,229 do E[p]=(2^45-1)*256+1+p end;E[230]=(2^45-1)*256 end;local F=s[1]<2^15 and 1 or-1;local G=s[2]<2^15 and 1 or-1;local H,I,J,K;for L=1,90*x do for y=1,2 do local E,B=r[y],s[y]local M=E[1]if not M[B]then M[B]=true;E[2]=E[2]+1;local N;local O=5;local P=E[O]while P>0 do local Q=E[P]local R=2^53;local S=P*45+150-6*45;for A=S,S+44 do R=R/2;if Q>=R then Q=Q-R;if 65535*c((B+0.5+2^-16)*(A-1)/65535)<(B-(0.5+2^-16))*(A-1)then E[P]=E[P]-R;E[3]=E[3]-1 else N=N or A end end end;if E[P]<R then E[O]=E[O]+Q-P else O=P end;P=Q end;E[4]=N end end;local T=r[1][3]+r[2][3]local U=r[1][2]local V=r[2][2]if T~=J then J=T;H=U;I=V end;if d(U-H,V-I)>=20 then print("Determined at frame "..L..", resolution: "..r[1][4].." x "..r[2][4])K=true;break end;local W=f(L+0.1)%1<0.5 and 2^13 or 0;MoveMouseRelative(F*e(1,c(W/((s[1]-2^15)*F+2^15+2^13/8))),G*e(1,c(W/((s[2]-2^15)*G+2^15+2^13/8))))n(10)s[1],s[2]=GetMousePosition()end;if not K then r[1][4],r[2][4]=nil end end end;u=false;print'Function "GetMousePositionInPixels()" failed to determine screen resolution and has been disabled'end;return 0,0,0,0,s[1],s[2]end end;local function X(Y,Z)local D,D,_,a0=q()if _>0 then MoveMouseTo(c(e(0,d(_-1,Y))*(2^16-1)/(_-1)+0.5),c(e(0,d(a0-1,Z))*(2^16-1)/(a0-1)+0.5))end end;local a1,a2,a3;local a4,a5,a6,a7,a8,a9;local aa;do local function ab()local ac={}for p=1,50 do ac[p]=0 end;return ac end;local ad,ae;do local af,ag,ah,ai={},{}do local aj,ak,al={[0]=0},0,29;for Z=0,127*256,256 do for Y=Z,Z+127 do Y=aj[Y]*2;aj[ak]=Y;aj[ak+1]=Y;aj[ak+256]=Y;aj[ak+257]=Y+1;ak=ak+2 end;ak=ak+256 end;function ah(Y,Z,am)local an=Y%2^32;local ao=Z%2^32;local ap=an%256;local aq=ao%256;local ar=aj[ap+aq*256]Y=an-ap;Z=(ao-aq)/256;ap=Y%65536;aq=Z%256;ar=ar+aj[ap+aq]*256;Y=(Y-ap)/256;Z=(Z-aq)/256;ap=Y%65536+Z%256;ar=ar+aj[ap]*65536;ar=ar+aj[(Y+Z-ap)/256]*16777216;if am then return an+ao-2*ar else return ar end end;function ai(Y,Z,as,o,at)if as then if o then if at then o=ah(o,at,true)end;as=ah(as,o,true)end;Z=ah(Z,as,true)end;return ah(Y,Z,true)end;local function au(Y)local av=Y%2^32;return av,(Y-av)/2^32 end;function ae(Y,Z)local aw,ax=au(Y)local ay,az=au(Z)return ai(ax,az)*2^32+ai(aw,ay)end;local function aA()local aB=al%2;al=ai((al-aB)/2,142*aB)return aB*ak end;for P=1,24 do local av=0;for p=0,5 do ak=2^(2^p-1)av=av+aA()end;af[P],ag[P]=av,aA()end end;function ad(aC,aD,aE,A,aF)for aG=aE,aE+A-1,aF do for p=1,aF/4 do aG=aG+4;local aH,aI,aJ,aK=h(aD,aG-3,aG)aC[p]=ai(aC[p],((aK*256+aJ)*256+aI)*256+aH)end;local aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx=aC[01],aC[02],aC[03],aC[04],aC[05],aC[06],aC[07],aC[08],aC[09],aC[10],aC[11],aC[12],aC[13],aC[14],aC[15],aC[16],aC[17],aC[18],aC[19],aC[20],aC[21],aC[22],aC[23],aC[24],aC[25],aC[26],aC[27],aC[28],aC[29],aC[30],aC[31],aC[32],aC[33],aC[34],aC[35],aC[36],aC[37],aC[38],aC[39],aC[40],aC[41],aC[42],aC[43],aC[44],aC[45],aC[46],aC[47],aC[48],aC[49],aC[50]for by=1,24 do local bz=ai(aL,aV,b4,be,bo)local bA=ai(aM,aW,b5,bf,bp)local bB=ai(aN,aX,b6,bg,bq)local bC=ai(aO,aY,b7,bh,br)local bD=ai(aP,aZ,b8,bi,bs)local bE=ai(aQ,a_,b9,bj,bt)local bF=ai(aR,b0,ba,bk,bu)local bG=ai(aS,b1,bb,bl,bv)local bH=ai(aT,b2,bc,bm,bw)local bI=ai(aU,b3,bd,bn,bx)local bJ=ai(bz,bD*2+(bE-bE%2^31)/2^31)local bK=ai(bA,bE*2+(bD-bD%2^31)/2^31)local bL=ai(bJ,aN)local bM=ai(bK,aO)local bN=ai(bJ,aX)local bO=ai(bK,aY)local bP=ai(bJ,b6)local bQ=ai(bK,b7)local bR=ai(bJ,bg)local bS=ai(bK,bh)local bT=ai(bJ,bq)local bU=ai(bK,br)aN=(bN-bN%2^20)/2^20+bO*2^12;aO=(bO-bO%2^20)/2^20+bN*2^12;aX=(bR-bR%2^19)/2^19+bS*2^13;aY=(bS-bS%2^19)/2^19+bR*2^13;b6=bL*2+(bM-bM%2^31)/2^31;b7=bM*2+(bL-bL%2^31)/2^31;bg=bP*2^10+(bQ-bQ%2^22)/2^22;bh=bQ*2^10+(bP-bP%2^22)/2^22;bq=bT*2^2+(bU-bU%2^30)/2^30;br=bU*2^2+(bT-bT%2^30)/2^30;bJ=ai(bB,bF*2+(bG-bG%2^31)/2^31)bK=ai(bC,bG*2+(bF-bF%2^31)/2^31)bL=ai(bJ,aP)bM=ai(bK,aQ)bN=ai(bJ,aZ)bO=ai(bK,a_)bP=ai(bJ,b8)bQ=ai(bK,b9)bR=ai(bJ,bi)bS=ai(bK,bj)bT=ai(bJ,bs)bU=ai(bK,bt)aP=(bP-bP%2^21)/2^21+bQ*2^11;aQ=(bQ-bQ%2^21)/2^21+bP*2^11;aZ=(bT-bT%2^3)/2^3+bU*2^29%2^32;a_=(bU-bU%2^3)/2^3+bT*2^29%2^32;b8=bN*2^6+(bO-bO%2^26)/2^26;b9=bO*2^6+(bN-bN%2^26)/2^26;bi=bR*2^15+(bS-bS%2^17)/2^17;bj=bS*2^15+(bR-bR%2^17)/2^17;bs=(bL-bL%2^2)/2^2+bM*2^30%2^32;bt=(bM-bM%2^2)/2^2+bL*2^30%2^32;bJ=ai(bD,bH*2+(bI-bI%2^31)/2^31)bK=ai(bE,bI*2+(bH-bH%2^31)/2^31)bL=ai(bJ,aR)bM=ai(bK,aS)bN=ai(bJ,b0)bO=ai(bK,b1)bP=ai(bJ,ba)bQ=ai(bK,bb)bR=ai(bJ,bk)bS=ai(bK,bl)bT=ai(bJ,bu)bU=ai(bK,bv)aR=bR*2^21%2^32+(bS-bS%2^11)/2^11;aS=bS*2^21%2^32+(bR-bR%2^11)/2^11;b0=bL*2^28%2^32+(bM-bM%2^4)/2^4;b1=bM*2^28%2^32+(bL-bL%2^4)/2^4;ba=bP*2^25%2^32+(bQ-bQ%2^7)/2^7;bb=bQ*2^25%2^32+(bP-bP%2^7)/2^7;bk=(bT-bT%2^8)/2^8+bU*2^24%2^32;bl=(bU-bU%2^8)/2^8+bT*2^24%2^32;bu=(bN-bN%2^9)/2^9+bO*2^23%2^32;bv=(bO-bO%2^9)/2^9+bN*2^23%2^32;bJ=ai(bF,bz*2+(bA-bA%2^31)/2^31)bK=ai(bG,bA*2+(bz-bz%2^31)/2^31)bL=ai(bJ,aT)bM=ai(bK,aU)bN=ai(bJ,b2)bO=ai(bK,b3)bP=ai(bJ,bc)bQ=ai(bK,bd)bR=ai(bJ,bm)bS=ai(bK,bn)bT=ai(bJ,bw)bU=ai(bK,bx)aT=bT*2^14+(bU-bU%2^18)/2^18;aU=bU*2^14+(bT-bT%2^18)/2^18;b2=bN*2^20%2^32+(bO-bO%2^12)/2^12;b3=bO*2^20%2^32+(bN-bN%2^12)/2^12;bc=bR*2^8+(bS-bS%2^24)/2^24;bd=bS*2^8+(bR-bR%2^24)/2^24;bm=bL*2^27%2^32+(bM-bM%2^5)/2^5;bn=bM*2^27%2^32+(bL-bL%2^5)/2^5;bw=(bP-bP%2^25)/2^25+bQ*2^7;bx=(bQ-bQ%2^25)/2^25+bP*2^7;bJ=ai(bH,bB*2+(bC-bC%2^31)/2^31)bK=ai(bI,bC*2+(bB-bB%2^31)/2^31)bN=ai(bJ,aV)bO=ai(bK,aW)bP=ai(bJ,b4)bQ=ai(bK,b5)bR=ai(bJ,be)bS=ai(bK,bf)bT=ai(bJ,bo)bU=ai(bK,bp)aV=bP*2^3+(bQ-bQ%2^29)/2^29;aW=bQ*2^3+(bP-bP%2^29)/2^29;b4=bT*2^18+(bU-bU%2^14)/2^14;b5=bU*2^18+(bT-bT%2^14)/2^14;be=(bN-bN%2^28)/2^28+bO*2^4;bf=(bO-bO%2^28)/2^28+bN*2^4;bo=(bR-bR%2^23)/2^23+bS*2^9;bp=(bS-bS%2^23)/2^23+bR*2^9;aL=ai(bJ,aL)aM=ai(bK,aM)aL,aN,aP,aR,aT=ai(aL,ah(-1-aN,aP)),ai(aN,ah(-1-aP,aR)),ai(aP,ah(-1-aR,aT)),ai(aR,ah(-1-aT,aL)),ai(aT,ah(-1-aL,aN))aM,aO,aQ,aS,aU=ai(aM,ah(-1-aO,aQ)),ai(aO,ah(-1-aQ,aS)),ai(aQ,ah(-1-aS,aU)),ai(aS,ah(-1-aU,aM)),ai(aU,ah(-1-aM,aO))aV,aX,aZ,b0,b2=ai(b0,ah(-1-b2,aV)),ai(b2,ah(-1-aV,aX)),ai(aV,ah(-1-aX,aZ)),ai(aX,ah(-1-aZ,b0)),ai(aZ,ah(-1-b0,b2))aW,aY,a_,b1,b3=ai(b1,ah(-1-b3,aW)),ai(b3,ah(-1-aW,aY)),ai(aW,ah(-1-aY,a_)),ai(aY,ah(-1-a_,b1)),ai(a_,ah(-1-b1,b3))b4,b6,b8,ba,bc=ai(b6,ah(-1-b8,ba)),ai(b8,ah(-1-ba,bc)),ai(ba,ah(-1-bc,b4)),ai(bc,ah(-1-b4,b6)),ai(b4,ah(-1-b6,b8))b5,b7,b9,bb,bd=ai(b7,ah(-1-b9,bb)),ai(b9,ah(-1-bb,bd)),ai(bb,ah(-1-bd,b5)),ai(bd,ah(-1-b5,b7)),ai(b5,ah(-1-b7,b9))be,bg,bi,bk,bm=ai(bm,ah(-1-be,bg)),ai(be,ah(-1-bg,bi)),ai(bg,ah(-1-bi,bk)),ai(bi,ah(-1-bk,bm)),ai(bk,ah(-1-bm,be))bf,bh,bj,bl,bn=ai(bn,ah(-1-bf,bh)),ai(bf,ah(-1-bh,bj)),ai(bh,ah(-1-bj,bl)),ai(bj,ah(-1-bl,bn)),ai(bl,ah(-1-bn,bf))bo,bq,bs,bu,bw=ai(bs,ah(-1-bu,bw)),ai(bu,ah(-1-bw,bo)),ai(bw,ah(-1-bo,bq)),ai(bo,ah(-1-bq,bs)),ai(bq,ah(-1-bs,bu))bp,br,bt,bv,bx=ai(bt,ah(-1-bv,bx)),ai(bv,ah(-1-bx,bp)),ai(bx,ah(-1-bp,br)),ai(bp,ah(-1-br,bt)),ai(br,ah(-1-bt,bv))aL=ai(aL,af[by])aM=aM+ag[by]end;aC[01],aC[02],aC[03],aC[04],aC[05],aC[06],aC[07],aC[08],aC[09],aC[10],aC[11],aC[12],aC[13],aC[14],aC[15],aC[16],aC[17],aC[18],aC[19],aC[20],aC[21],aC[22],aC[23],aC[24],aC[25],aC[26],aC[27],aC[28],aC[29],aC[30],aC[31],aC[32],aC[33],aC[34],aC[35],aC[36],aC[37],aC[38],aC[39],aC[40],aC[41],aC[42],aC[43],aC[44],aC[45],aC[46],aC[47],aC[48],aC[49],aC[50]=aL,aM%2^32,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx end end;local function bV(aF,bW,bX,bY)local bZ,aC="",ab()local z;local function b_(c0)if c0 then if bZ then local aE=0;if bZ~=""and#bZ+#c0>=aF then aE=aF-#bZ;ad(aC,bZ..k(c0,1,aE),0,aF,aF)bZ=""end;local A=#c0-aE;local c1=A%aF;ad(aC,c0,aE,A-c1,aF)bZ=bZ..k(c0,#c0+1-c1)return b_ else error("Adding more chunks is not allowed after receiving the result",2)end else if bZ then local c2=bX and 31 or 6;bZ=bZ..(#bZ+1==aF and i(c2+128)or i(c2)..j("\0",(-2-#bZ)%aF).."\128")ad(aC,bZ,0,#bZ,aF)bZ=nil;local c3=0;local c4=aF/4;local c5={}local function c6(c7)if c3>=c4 then ad(aC,nil,0,1,1)c3=0 end;c7=c(d(c7,c4-c3))for p=1,c7 do c5[p]=g("%08x",aC[c3+p])end;c3=c3+c7;return l(m(c5,"",1,c7),"(..)(..)(..)(..)","%4%3%2%1"),c7*4 end;local c8={}local c9,ca="",0;local function cb(cc)cc=cc or 1;if cc<=ca then ca=ca-cc;local cd=cc*2;local z=k(c9,1,cd)c9=k(c9,cd+1)return z end;local ce=0;if ca>0 then ce=1;c8[ce]=c9;cc=cc-ca end;while cc>=4 do local cf,cg=c6(cc/4)ce=ce+1;c8[ce]=cf;cc=cc-cg end;if cc>0 then c9,ca=c6(1)ce=ce+1;c8[ce]=cb(cc)else c9,ca="",0 end;return m(c8,"",1,ce)end;if bW<0 then z=cb else z=cb(bW)end end;return z end end;if bY then return b_(bY)()else return b_ end end;function a4(bY)return bV(144,28,false,bY)end;function a5(bY)return bV(136,32,false,bY)end;function a6(bY)return bV(104,48,false,bY)end;function a7(bY)return bV(72,64,false,bY)end;function a8(bW,bY)return bV(168,bW,true,bY)end;function a9(bW,bY)return bV(136,bW,true,bY)end end;local ch,ci={},0;local cj,ck={},0;local cl=ab()local cm=0;local function cn(co)co=((co+0xDEAD)%2^16+1)*0xBEEF%(2^16+1)-1;local cp=cm;local cq=cp%2^36;cm=cq*126611+(cp-cq)*505231/2^36+co%256*598352261448+co*2348539529 end;function a3()if ci>=42 or ck<=1024-25 then local cr=d(42,ci)for p=1,cr do cl[p]=cl[p]+ch[p]end;for p=42+1,ci do ch[p-42]=ch[p]end;ci=ci-cr;ad(cl,nil,0,1,1)local cs,ct,cu=0,0,0;for p=1,25 do if ct<21 then cs=cs+1;cu=cu*2^32+cl[cs]ct=ct+32 end;local cv=cu%2^21;cu=(cu-cv)/2^21;ct=ct-21;cs=cs+1;cv=cl[cs]*2^21+cv;if ck<1024 then ck=ck+1;cj[ck]=cv else local cw=cm%ck+1;local cx=cj[cw]cj[cw]=ae(cx,cv)cn(cx)end end else return true end end;local function cy(cz)if ci<128 then ci=ci+1;ch[ci]=cz%2^32 else local P=cm%ci+1;ch[P]=(ch[P]+cz)%2^32 end end;do local cA=math.log;local cB=cA(4)local function cC(cD)cD=cD*cD;return cD<25 and 0 or cA(cD)/cB-3 end;local cE=0;function aa()return c(cE)end;local cF,cG,cH;local cI={MOUSE_BUTTON_PRESSED=600,G_PRESSED=500,M_PRESSED=400,MOUSE_BUTTON_RELEASED=300,G_RELEASED=200,M_RELEASED=100,lhc=50}function a1(cJ,cK,cL)local Y,Z,cM,cN,aJ,aK=q()cn(aJ)cn(aK)local o=GetRunningTime()cn(o)if cJ then if cK then cJ=(cI[cJ]or 0)+cK+(cI[cL]or 0)cn(cJ)else for p=1,#cJ,2 do local cO,cP=h(cJ,p,p+1)local cQ=cO+(cP or 0)*256;cn(cQ)cy(cQ)end;cJ,cF,cG,cH=400,Y,Z,o end;if cJ>=400 then cy(o*2^10+cJ)cn(Y)cy(aJ*2^16+aK)cn(Z)cE=cE+cC((o-cH)/16)+((Y<16 or Y>=cM-16)and 0 or d(4,cC(Y-cF)))+((Z<16 or Z>=cN-16)and 0 or d(4,cC(Z-cG)))cF,cG,cH=Y,Z,o end end end end;local function cR()if ck==0 then a3()end;local cw=cm%ck+1;local cv=cj[cw]cj[cw]=cj[ck]ck=ck-1;cn(cv)return cv end;local cS,cT=0,0;local function cU(cV)local cW=2^cV;local z;if cV<=cT then z=cS%cW;cS=(cS-z)/cW else local cX=cR()z=cX%cW;cS=(cX-z)/cW*2^cT+cS;cT=53+cT end;cT=cT-cV;return z end;local cY,cZ,c_=0;function a2(ak,co)if ak then if not co then ak,co=1,ak end;local d0=co-ak+1;if d0<1 or d0>2^53 then error("Invalid arguments for function random()",2)end;local _,d1,d2;if d0==c_ then _,d1=cY,cZ else local d3=2^cY;if d0>d3/2 and d0<=d3 then _=cY else _=53;local d4=-1;repeat local d5=c((d4+_)/2)if d0<=2^d5 then _=d5 else d4=d5 end until _-d4==1;cY=_ end;d1=0;local d6=_+1;while d6-d1>1 do local d7=c((d1+d6)/2)if d0%2^d7==0 then d1=d7 else d6=d7 end end;c_,cZ=d0,d1 end;local d8,d9,da,db=2^d1,0,0,2^0;d0=d0/d8;_=_-d1;local dc=2^_;local dd=dc-d0;repeat d2=cU(_-da)*db+d9;local de=d2<d0;if not de then local df=dd;d9=d2-d0;da=_-1;db=dc/2;repeat da=da-1;db=db/2;if db<=df then if d9<db then df=nil else df=df-db;d9=d9-db end end until not df end until de;return ak+d2*d8+cU(d1)else return cR()/2^53 end end end;local function Sleep(dg)dg=dg or 10;local dh=GetRunningTime()local di,dj=dh;while not dj and di<dh+dg-100 do dj=a3()di=GetRunningTime()end;dg=dg-(di-dh)if dg>0 then n(dg)end;a1()end;local dk={"L","R","M"}local dl={L=1,M=2,R=3,l=1,m=2,r=3}local dm,dn,dp,dq=PressMouseButton,ReleaseMouseButton,PressAndReleaseMouseButton,IsMouseButtonPressed;local function PressMouseButton(dr)dm(dl[dr]or dr)end;local function ReleaseMouseButton(dr)dn(dl[dr]or dr)end;local function PressAndReleaseMouseButton(dr)dp(dl[dr]or dr)end;local function IsMouseButtonPressed(dr)return dq(dl[dr]or dr)end;do assert(a4("The quick brown fox jumps over the lazy dog")=="d15dadceaa4d5d7bb3b48f446421d542e08ad8887305e28d58335795")assert(a5("")=="a7ffc6f8bf1ed76651c14756a061d662f580ff4de43b49fa82d80a4b80f8434a")assert(a6("The quick brown fox jumps over the lazy dog")=="7063465e08a93bce31cd89d2e3ca8f602498696e253592ed26f07bf7e703cf328581e1471a7ba7ab119b1a9ebdf8be41")assert(a8(11,"The quick brown fox jumps over the lazy dog")=="f4202e3c5852f9182a0430")local ds=a8(-1,"The quick brown fox jumps over the lazy dog")assert(ds(5)=="f4202e3c58")assert(ds(4)=="52f9182a")end;local dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE;screenStats[1],screenStats[2],screenStats[3]=GetMousePosition()midScreen=screenStats[3]/2;dy=false;dE=false;dz=0;a=a*1000;function moveInventory()dy=not dy;if dy then dt,du=q()if dt>midScreen then dv=midScreen-(dt-midScreen+20)else dv=midScreen+midScreen-dt+20 end;repeat dw=du+math.random(0,20)Sleep(math.random(135,235))X(dt,du)Sleep(5)PressMouseButton(1)Sleep(5)X(dv,dw)Sleep(5)ReleaseMouseButton(1)Sleep(math.random(150,250))local dF=dy until not dF and dy end end;function sellAtTerminal()dE=not dE;if dE then repeat if IsMouseButtonPressed(1)and dz==0 then dA,dB=q()dz=1 end;Sleep(1000)if IsMouseButtonPressed(1)and dz==1 then dC,dD=q()dz=2 end;Sleep(5)until dz==2;repeat Sleep(math.random(135,235))X(dA,dB)Sleep(5)PressAndReleaseMouseButton(1)Sleep(a)X(dC,dD)Sleep(5)PressAndReleaseMouseButton(1)Sleep(math.random(150,250))local dG=dE until not dG and dE;dz=0 end end;function OnEvent(cJ,cK,cL)local dH;if cJ=="PROFILE_ACTIVATED"then ClearLog()EnablePrimaryMouseButtonEvents(true)a1(GetDate())SetMouseDPITableIndex(2)if not IsKeyLockOn"NumLock"then PressAndReleaseKey"NumLock"end elseif cJ=="MOUSE_BUTTON_PRESSED"or cJ=="MOUSE_BUTTON_RELEASED"then dH=dk[cK]or cK end;a1(cJ,cK,cL)if cJ=="PROFILE_DEACTIVATED"then EnablePrimaryMouseButtonEvents(false)end;if cJ=="MOUSE_BUTTON_PRESSED"and dH==4 then moveInventory()end;if cJ=="MOUSE_BUTTON_RELEASED"and dH==4 then end;if cJ=="MOUSE_BUTTON_PRESSED"and dH==5 then sellAtTerminal()end;if cJ=="MOUSE_BUTTON_RELEASED"and dH==5 then end;if cJ=="G_PRESSED"and cK==1 then end;if cJ=="G_RELEASED"and cK==1 then end;if cJ=="M_PRESSED"and cK==3 then end;if cJ=="M_RELEASED"and cK==3 then end;a3()end
